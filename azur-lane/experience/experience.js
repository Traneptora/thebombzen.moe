const experience_table_enjp = [0, 100, 300, 600, 1000, 1500, 2100, 2800, 3600,
4500, 5500, 6600, 7800, 9100, 10500, 12000, 13600, 15300, 17100, 19000, 21000,
23100, 25300, 27600, 30000, 32500, 35100, 37800, 40600, 43500, 46500, 49600,
52800, 56100, 59500, 63000, 66600, 70300, 74100, 78000, 82000, 86200, 90600,
95200, 100000, 105000, 110200, 115600, 121200, 127000, 133000, 139200, 145600,
152200, 159000, 166000, 173200, 180600, 188200, 196000, 204000, 212300, 220900,
229800, 239000, 248500, 258300, 268400, 278800, 289500, 301600, 314140, 327120,
340540, 354400, 368700, 383440, 398620, 414240, 430300, 447550, 465375, 483775,
502750, 522300, 542425, 563125, 584400, 606250, 628675, 652675, 677875, 704275,
733075, 764275, 800275, 842275, 890275, 962275, 1120675, 1170675, 1223675,
1279675, 1338675, 1400675, 1465675, 1536675, 1613675, 1696675, 1785675,
1880675, 1985675, 2100675, 2225675, 2360675, 2505675, 2665675, 2840675,
3030675, 3235675, 3455675, 3696675, 3958675, 4241675, 4545675];

const experience_table_cn = [0, 100, 300, 600, 1000, 1500, 2100, 2800, 3600,
4500, 5500, 6600, 7800, 9100, 10500, 12000, 13600, 15300, 17100, 19000, 21000,
23100, 25300, 27600, 30000, 32500, 35100, 37800, 40600, 43500, 46500, 49600,
52800, 56100, 59500, 63000, 66600, 70300, 74100, 78000, 82000, 86200, 90600,
95200, 100000, 105000, 110200, 115600, 121200, 127000, 133000, 139200, 145600,
152200, 159000, 166000, 173200, 180600, 188200, 196000, 204000, 212300, 220900,
229800, 239000, 248500, 258300, 268400, 278800, 289500, 300500, 311900, 323700,
335900, 348500, 361500, 374900, 388700, 402900, 417500, 432500, 448000, 464000,
480500, 497500, 515000, 533000, 551500, 570500, 590000, 610000, 631000, 653000,
677000, 703000, 733000, 768000, 808000, 868000, 1000000, 1050000, 1103000,
1159000, 1218000, 1280000, 1345000, 1416000, 1493000, 1576000, 1665000,
1760000, 1865000, 1980000, 2105000, 2240000, 2385000, 2545000, 2720000,
2910000, 3115000, 3335000, 3576000, 3838000, 4121000, 4425000];

const experience_table_ur = [0, 120, 360, 720, 1200, 1800, 2520, 3360, 4320,
5400, 6600, 7920, 9360, 10920, 12600, 14400, 16320, 18360, 20520, 22800, 25200,
27720, 30360, 33120, 36000, 39000, 42120, 45360, 48720, 52200, 55800, 59520,
63360, 67320, 71400, 75600, 79920, 84360, 88920, 93600, 98400, 103440, 108720,
114240, 120000, 126000, 132240, 138720, 145440, 152400, 159600, 167040, 174720,
182640, 190800, 199200, 207840, 216720, 225840, 235200, 244800, 254760, 265080,
275760, 286800, 298200, 309960, 322080, 334560, 347400, 360600, 374280, 388440,
403080, 418200, 433800, 449880, 466440, 483480, 501000, 519000, 537600, 556800,
576600, 597000, 618000, 639600, 661800, 684600, 708000, 734000, 761300, 789900,
821100, 854900, 893900, 939400, 991400, 1069400, 1241000, 1301000, 1364600,
1431800, 1502600, 1577000, 1655000, 1740200, 1832600, 1932200, 2039000,
2153000, 2279000, 2417000, 2567000, 2729000, 2903000, 3095000, 3305000,
3533000, 3779000, 4043000, 4332200, 4646600, 4986200, 5351000];

function get_total_exp(table, level){
    if (level > 0 && level <= 125){
        return table[level - 1];
    } else {
        return null;
    }
}

function get_exp_diff(table, current_level, target_level){
    let current_exp = get_total_exp(table, current_level);
    let target_exp = get_total_exp(table, target_level);
    if (current_exp === null || target_exp === null){
        return null;
    }
    return target_exp - current_exp;
}

function calculate_experience(){
    const current_level = document.getElementById('txt-level-a').value;
    const target_level = document.getElementById('txt-level-b').value;
    const ship_table_s = document.getElementById('ship-table').value;
    const exp_needed_txt = document.getElementById('exp-needed');
    let table;
    switch(ship_table_s){
        case '':
        case 'en':
            table = experience_table_enjp;
            break;
        case 'cn':
            table = experience_table_cn;
            break;
        case 'ur':
            table = experience_table_ur;
            break;
        default:
            // stop tampering!
            exp_needed_txt.textContent = 'Bro (╯°□°）╯︵ ┻━┻';
            return;
    }
    const exp_diff = get_exp_diff(table, current_level, target_level);
    if (exp_diff === null){
        exp_needed_txt.textContent = "Some Error Occurred :(";
    } else {
        exp_needed_txt.textContent = exp_diff.toLocaleString();
    }
}


function ready(){
    document.getElementById('ship-table').addEventListener('change', calculate_experience);
    calculate_experience();
}

document.addEventListener('DOMContentLoaded', ready);
